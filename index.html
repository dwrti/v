<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <title>بث شاشة الأيفون</title>
    <style>
        video { width: 100%; max-width: 500px; border: 2px solid #333; border-radius: 10px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #007AFF; color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>

    <h2>بث الشاشة في متصفح Safari</h2>
    <button id="startBtn">بدء مشاركة الشاشة</button>
    <br><br>
    <video id="screenVideo" autoplay playsinline></video>

    <script>
        const startBtn = document.getElementById('startBtn');
        const videoElement = document.getElementById('screenVideo');

        startBtn.addEventListener('click', async () => {
            try {
                // طلب الإذن لبدء التقاط الشاشة
                const mediaStream = await navigator.mediaDevices.getDisplayMedia({
                    video: true
                });
                
                // عرض البث في عنصر الفيديو
                videoElement.srcObject = mediaStream;
            } catch (err) {
                console.error("حدث خطأ: " + err);
                alert("تأكد من إعطاء صلاحية تسجيل الشاشة للمتصفح");
            }
        });
    </script>
</body>
</html>
