<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receiver Pro</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/dplayer@latest/dist/DPlayer.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; background: #000; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #dplayer { width: 100%; height: 100%; }
        #status { position: absolute; top: 10px; right: 10px; color: white; background: rgba(0,0,0,0.6); padding: 5px 15px; border-radius: 20px; font-family: sans-serif; z-index: 99; font-size: 12px; }
    </style>
</head>
<body>
    <div id="status">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø´Ø§Ø±Ø©...</div>
    <div id="dplayer"></div>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
        const firebaseConfig = {
            apiKey: "AIzaSyAjTD-OJBUYewp5bqV0iVh4Rxp5zjBsU54",
            authDomain: "videos-5e336.firebaseapp.com",
            databaseURL: "https://videos-5e336-default-rtdb.firebaseio.com",
            projectId: "videos-5e336",
            appId: "1:300218651134:web:4bd24df8e555e62828f0af"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        let dp = new DPlayer({
            container: document.getElementById('dplayer'),
            live: true,
            autoplay: true,
            video: { url: '', type: 'hls' }
        });

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Firebase
        db.ref('videoSync').on('value', (snapshot) => {
            const data = snapshot.val();
            if (data && data.url) {
                document.getElementById('status').innerText = "ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨Ø« ðŸ“¡";
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´ØºÙ„ Ø¨Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯
                dp.switchVideo({ url: data.url, type: 'hls' });
                dp.play();
            }
        });

        // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© ÙƒØªÙ… Ø§Ù„ØµÙˆØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª
        document.body.onclick = () => { dp.play(); };
    </script>
</body>
</html>
