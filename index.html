<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Magnet Player Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/webtorrent@latest/webtorrent.min.js"></script>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; text-align: center; }
        #video-player { width: 95%; max-width: 800px; margin: 20px auto; border: 2px solid #333; }
        .info { font-size: 14px; color: #aaa; margin-top: 10px; }
        #log { font-family: monospace; font-size: 12px; color: #0f0; }
    </style>
</head>
<body>

    <h3>مشغل الماغنت المتطور</h3>
    <div id="video-player">
        <p id="msg">انتظار إضافة الرابط...</p>
    </div>
    
    <div class="info">
        السرعة: <span id="speed">0</span> MB/s | 
        الموزعين: <span id="peers">0</span>
    </div>
    <div id="log"></div>

    <script>
        const client = new WebTorrent();
        
        // الرابط اللي أرسلته
        const myMagnet = "magnet:?xt=urn:btih:D745D479E6CD56D5F7DDB2F35970EF7FE1311788&dn=Zootopia%202%202025%201080p%20Multi%20READNFO%20HEVC%20x265-RMTeam&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com";

        // إضافة تراكرز WebSockets اختيارية لدعم المتصفح
        const trackers = [
            'wss://tracker.btorrent.xyz',
            'wss://tracker.openwebtorrent.com',
            'wss://tracker.fastcast.nz'
        ];

        function start() {
            document.getElementById('msg').innerText = "جاري البحث عن Peers يدعمون المتصفح...";
            
            client.add(myMagnet, { announce: trackers }, function (torrent) {
                const file = torrent.files.find(f => f.name.endsWith('.mp4') || f.name.endsWith('.mkv'));
                
                if (file) {
                    document.getElementById('video-player').innerHTML = '';
                    file.appendTo('#video-player', { autoplay: true, controls: true });
                }

                torrent.on('download', () => {
                    document.getElementById('speed').innerText = (torrent.downloadSpeed / (1024 * 1024)).toFixed(2);
                    document.getElementById('peers').innerText = torrent.numPeers;
                });
            });
        }

        // تشغيل تلقائي
        start();
    </script>
</body>
</html>
