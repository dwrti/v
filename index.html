<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المشغل الشامل - Puffin Edition</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <style>
        :root { --main-color: #00ffcc; --bg-color: #0f0f0f; }
        body { background-color: var(--bg-color); color: white; font-family: 'Tahoma', sans-serif; margin: 0; padding: 15px; }
        .wrapper { max-width: 700px; margin: auto; }
        .header { text-align: center; padding: 20px 0; border-bottom: 2px solid #222; margin-bottom: 20px; }
        .input-group { background: #1a1a1a; padding: 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input[type="text"] { 
            width: 100%; padding: 15px; border: 2px solid #333; border-radius: 10px; 
            background: #000; color: var(--main-color); font-size: 16px; outline: none; box-sizing: border-box;
        }
        input:focus { border-color: var(--main-color); }
        button { 
            width: 100%; background: var(--main-color); color: #000; border: none; 
            padding: 15px; margin-top: 15px; border-radius: 10px; font-weight: bold; 
            font-size: 18px; cursor: pointer; transition: 0.3s;
        }
        button:active { transform: scale(0.98); opacity: 0.8; }
        .video-box { margin-top: 25px; border-radius: 15px; overflow: hidden; border: 1px solid #333; background: #000; }
        .vjs-big-play-centered .vjs-big-play-button { background-color: var(--main-color) !important; color: black !important; border-radius: 50%; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="header">
        <h2 style="color: var(--main-color);">مُشغل الفيديو الذكي ⚡</h2>
        <p style="font-size: 12px; color: #888;">يدعم MP4, AVI, MKV, M3U8</p>
    </div>

    <div class="input-group">
        <input type="text" id="video_url" placeholder="ضع رابط الفيديو هنا...">
        <button onclick="playNow()">تـشـغـيـل</button>
    </div>

    <div class="video-box">
        <video id="puffin_player" class="video-js vjs-big-play-centered vjs-16-9" controls preload="auto">
            <p class="vjs-no-js">عفواً، متصفحك لا يدعم تشغيل هذا الفيديو.</p>
        </video>
    </div>
</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>

<script>
    // تهيئة المشغل
    var player = videojs('puffin_player');

    function playNow() {
        var rawUrl = document.getElementById('video_url').value.trim();
        
        if (!rawUrl) {
            alert("يرجى إدخال الرابط أولاً!");
            return;
        }

        // تحديد نوع الفيديو تلقائياً بناءً على الرابط
        var type = "video/mp4"; // الافتراضي
        var ext = rawUrl.split('.').pop().split(/\#|\?/)[0].toLowerCase();

        if (ext === 'm3u8') type = "application/x-mpegURL";
        else if (ext === 'avi') type = "video/x-msvideo";
        else if (ext === 'mkv') type = "video/x-matroska";
        else if (ext === 'webm') type = "video/webm";

        // تحديث المشغل
        player.src({
            src: rawUrl,
            type: type
        });

        player.ready(function() {
            player.play().catch(function(error) {
                console.log("التحميل التلقائي قد يتطلب ضغطة زر التشغيل في بعض الجوالات.");
            });
        });
    }
</script>

</body>
</html>
